---
- project:
    templates:
    - tripleo-ansible-molecule-jobs
    - release-notes-jobs-python3
    - openstack-python3-wallaby-jobs
    - tripleo-multinode-container-minimal-pipeline
    - tripleo-standalone-scenarios-pipeline
    - tripleo-undercloud-jobs-pipeline
    - tripleo-upgrades-wallaby-pipeline
    check:
      jobs:
      - tripleo-ci-centos-8-content-provider: &tripleo_cp
          dependencies:
            - openstack-tox-linters
      - tripleo-ci-centos-9-content-provider: *tripleo_cp
      - openstack-tox-linters: &tripleo-linters
          nodeset: centos-8-stream
      - openstack-tox-docs: &tripleo-docs
          files:
          - ^doc/.*
          - ^molecule-requirements.txt
          - ^README.rst
          - ^requirements.txt
          - ^tripleo_ansible/ansible_plugins/.*

    gate:
      jobs:
      - tripleo-ci-centos-8-content-provider
      - tripleo-ci-centos-9-content-provider
      - openstack-tox-linters: *tripleo-linters
      - openstack-tox-docs: *tripleo-docs
    post:
      jobs:
      - publish-openstack-python-branch-tarball
    promote:
      jobs:
      - promote-openstack-tox-docs: *tripleo-docs
